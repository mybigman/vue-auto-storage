 /*!
  * vue-auto-storage.js v1.8.0
  * (c) 2018 Rocco Mormont
  * @license MIT
  */

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.VueAutoStorage=e()}(this,function(){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function n(t){return t.replace(/\[(\w+)\]/g,".$1").replace(/^\./,"")}function o(t,e,o){for(var r=n(e).split("."),i=r.pop(),a=0,u=r.length;a<u;a++)t=t[r[a]];t[i]=o}var r="__AUTO_STORAGE__",i=function(){function o(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),this._vm=t,this._unwatchFns=Object.create(null),this._storage=t.__AUTO_STORAGE_OPTIONS__.storage,this._debounce=t.__AUTO_STORAGE_OPTIONS__.debounce,this._prefix=r+t.$options.name.toUpperCase()+"__"}var i,a,u;return i=o,(a=[{key:"getName",value:function(t){return this._prefix+t.toUpperCase()}},{key:"getItem",value:function(t){return this._storage.getItem(this.getName(t))}},{key:"watch",value:function(e){var o,r=this;"string"==typeof e&&(e=n(e),this._unwatchFns[e]||void 0===(o=this._vm,n(e).split(".").reduce(function(e,n){return"object"===t(e)&&e.hasOwnProperty(n)?e[n]:void 0},o))||(this._unwatchFns[e]=this._vm.$watch(e,function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;return function(){for(var o=this,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];e&&clearTimeout(e),e=setTimeout(function(){t.apply(o,i)},n)}}(function(t){r._storage.setItem(r.getName(e),t)},this._debounce),{deep:!0})))}},{key:"unwatch",value:function(t){if(void 0===t){for(var e in this._unwatchFns)this._unwatchFns[e]();delete this._unwatchFns,this._unwatchFns=Object.create(null)}else t in this._unwatchFns&&(this._unwatchFns[t](),delete this._unwatchFns[t])}},{key:"clear",value:function(t){void 0===t?this._storage.clear(r):this._storage.removeItem(this.getName(t))}},{key:"destroy",value:function(){this.unwatch(),delete this._vm,delete this._prefix,delete this._storage,delete this._debounce}}])&&e(i.prototype,a),u&&e(i,u),o}();function a(t){var e;e=t.$options.autoStorage,"[object Array]"===Object.prototype.toString.call(e)&&t.$options.name&&!t.$autoStorage&&(t.$autoStorage=new i(t),function(t){for(var e,n,r=t.$options.autoStorage,i=0,a=r.length;i<a;i++)e=r[i],void 0!==(n=t.$autoStorage.getItem(e))&&o(t,e,n)}(t),function(t){for(var e=t.$options.autoStorage,n=0,o=e.length;n<o;n++)t.$autoStorage.watch(e[n])}(t))}var u={created:function(){try{a(this)}catch(t){}},beforeDestroy:function(){var t;(t=this).$autoStorage&&(t.$autoStorage.destroy(),delete t.$autoStorage)}};var c={debounce:300,storage:window.localStorage},s={install:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(var n in e)c[n]=e[n];var o=c.storage;if(!function(t){try{return"function"==typeof t.clear&&"function"==typeof t.getItem&&"function"==typeof t.setItem&&"function"==typeof t.removeItem}catch(t){return!1}}(o))throw new Error("Invalid storage instance given");c.storage=function(t){return{setItem:function(e,n){t.setItem(e,JSON.stringify(void 0===n?null:n))},getItem:function(e){var n=t[e];return void 0===n?void 0:JSON.parse(n)},removeItem:function(e){t.removeItem(e)},clear:function(e){if(e)for(var n in t)t.hasOwnProperty(n)&&n.includes(e)&&t.removeItem(n);else t.clear()}}}(o),Object.defineProperty(t.prototype,"__AUTO_STORAGE_OPTIONS__",{value:c}),t.mixin(u)}};return"undefined"!=typeof window&&window.Vue&&window.Vue.use(s),s});
